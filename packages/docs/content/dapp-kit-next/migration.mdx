---
title: Migration Guide (React)
---

This guide helps you migrate from the original `@mysten/dapp-kit` to the new
`@mysten/dapp-kit-react` package.

## Overview

The new dapp-kit-next represents a complete rewrite with these key changes:

- **Framework agnostic**: Split into `@mysten/dapp-kit-core` (framework-agnostic) and
  `@mysten/dapp-kit-react` (React bindings)
- **No React Query dependency**: Direct promise-based API instead of mutation hooks
- **Web Components**: UI components built with Lit Elements for cross-framework compatibility
- **Smaller bundle size**: No React Query dependency, lighter state management with nanostores
- **Better SSR support**: Compatible with SSR frameworks like Next.js
- **Cross-framework compatibility**: Core functionality can be used in vanilla JS, Vue, React, and
  other frameworks

## Step-by-Step Migration

### 1. Update Dependencies

Remove old packages and install the new ones:

```bash
# Remove old packages
npm uninstall @mysten/dapp-kit @tanstack/react-query

# Install new packages
npm i @mysten/dapp-kit-react @mysten/dapp-kit-core @mysten/sui
```

### 2. Replace Provider Setup

Replace multiple nested providers with a single unified provider.

**Before:**

```tsx
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { SuiClientProvider, WalletProvider } from '@mysten/dapp-kit';

export function ExampleComponent() {
	const queryClient = new QueryClient();
	const networkConfig = {
		mainnet: { url: 'https://mainnet.sui.io:443' },
		testnet: { url: 'https://testnet.sui.io:443' },
	};

	return (
		<QueryClientProvider client={queryClient}>
			<SuiClientProvider networks={networkConfig} defaultNetwork="mainnet">
				<WalletProvider>
					<App />
				</WalletProvider>
			</SuiClientProvider>
		</QueryClientProvider>
	);
}
```

**After:**

```tsx
import { DAppKitProvider, createDAppKit } from '@mysten/dapp-kit-react';
import { getFullnodeUrl, SuiClient } from '@mysten/sui/client';

export function ExampleComponent() {
	const dAppKit = createDAppKit({
		networks: ['mainnet', 'testnet'],
		defaultNetwork: 'testnet',
		createClient: (network) =>
			new SuiClient({
				url: getFullnodeUrl(network),
			}),
	});

	return (
		<DAppKitProvider dAppKit={dAppKit}>
			<App />
		</DAppKitProvider>
	);
}
```

### 3. Update Hook Usage

Most existing hooks continue to work with no changes needed:

**No changes required:**

- `useCurrentAccount`
- `useSuiClient`
- `useCurrentWallet`

**New hooks available:**

- `useDAppKit` - Access the main dAppKit instance
- `useConnection` - Get current wallet connection
- `useCurrentNetwork` - Get current network

### 4. Replace Mutation Patterns

The new version uses direct promise-based calls instead of React Query mutations.

**Before (React Query mutations):**

```tsx
import { useEffect } from 'react';
import { useSignAndExecuteTransaction } from '@mysten/dapp-kit';
import type { Transaction } from '@mysten/sui/transactions';

export function ExampleComponent({ transaction }: { transaction: Transaction }) {
	const { mutateAsync: signAndExecute } = useSignAndExecuteTransaction();

	useEffect(() => {
		async function execute() {
			await signAndExecute(
				{ transaction },
				{
					onSuccess: (result: any) => console.log(result),
					onError: (error: any) => console.error(error),
				},
			);
		}
		execute();
	}, [signAndExecute]);

	// ...
}
```

**After:**

```tsx
import { useEffect } from 'react';
import { useDAppKit } from '@mysten/dapp-kit-react';
import type { Transaction } from '@mysten/sui/transactions';

export function ExampleComponent({ transaction }: { transaction: Transaction }) {
	const dAppKit = useDAppKit();

	useEffect(() => {
		async function execute() {
			try {
				const result = await dAppKit.signAndExecuteTransaction({ transaction });
				console.log(result);
			} catch (error) {
				console.error(error);
			}
		}
		execute();
	}, [dAppKit]);

	// ...
}
```

### 5. Replace Data Fetching Patterns

React Query hooks are no longer available. Use standard React patterns for data fetching.

**Before (React Query hooks):**

```tsx
import { useSuiClientQuery } from '@mysten/dapp-kit';

export function ExampleComponent({ objectId }: { objectId: string }) {
	const { data, isLoading, error } = useSuiClientQuery('getObject', {
		id: objectId,
	});
	// ...
}
```

**After (Standard React patterns):**

```tsx
import { useSuiClient } from '@mysten/dapp-kit-react';
import { useState, useEffect } from 'react';
import type { SuiObjectData } from '@mysten/sui/client';

export function ExampleComponent({ objectId }: { objectId: string }) {
	const client = useSuiClient();
	const [data, setData] = useState<SuiObjectData | null>(null);
	const [isLoading, setIsLoading] = useState(true);
	const [error, setError] = useState<string | null>(null);

	useEffect(() => {
		async function getObject() {
			try {
				const object = await client.getObject({ id: objectId });
				setData(object.data);
			} catch (err: Error | unknown) {
				setError((err as Error)?.message || 'Unknown error');
			} finally {
				setIsLoading(false);
			}
		}
		getObject();
	}, [client, objectId]);
}
```

### 6. Update The Remaining Code

The following hooks from the original dapp-kit are not available in dapp-kit-next:

- `useSuiClientQuery`
- `useSuiClientMutation`
- `useSuiClientInfiniteQuery`
- `useResolveSuiNSNames`

**Migration:** Use `useSuiClient()` directly with standard React patterns or integrate your
preferred data fetching solution.

<Callout type="warning">
	The `reportTransactionEffects` feature has been removed from the [Wallet
	Standard](https://docs.sui.io/standards/wallet-standard) and so `dapp-kit-next` provides no
	replacement.
</Callout>
